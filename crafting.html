<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="style/style.css">
	<title>ELB's Pathfinder Tools</title>
</head>
<body>
	<header class="bookend" id="header">
		<h1><a href="/javascript-dnd-npc-gen">ELB's Pathfinder Tools</a></h1>
		<nav>
			<ul>
				<li class="nav-item"><a href="/javascript-dnd-npc-gen/npc-gen-upgraded">NPC Gen</a></li>
				<li class="nav-item"><a href="/javascript-dnd-npc-gen/npc-gen-ex-granlund">NPC Gen: Ex-Granlund</a></li>
				<li class="nav-item"><a href="/javascript-dnd-npc-gen/weather-gen">Weather Generator</a></li>
				<li class="nav-item"><a href="/javascript-dnd-npc-gen/settlement-gen">Settlement Generator</a></li>
				<li class="nav-item"><a href="/javascript-dnd-npc-gen/encounter-gen">Encounter Generator</a></li>
				<li class="nav-item"><a href="/javascript-dnd-npc-gen/dice-roller">Dice Roller</a></li>
			</ul>
		</nav>
	</header>
	<main class = "main-npc">
		<div class = "craft-section" id = "section-1">
		  	<p>Your Level</p>
		  	<input type="text" id="player level" name="player level" onchange="divFill2()">
		  	<p>Your Crafting Bonus</p>
		  	<input type="text" id="crafting bonus" name="crafting bonus" onchange="divFill2()">
		  	<p>Your Crafting Proficiency</p>
			<select id="crafting proficiency" onchange="divFill2()">
				<option value=-1>...</option>
				<option value=0>Untrained</option>
				<option value=1>Trained</option>
				<option value=2>Expert</option>
				<option value=3>Master</option>
				<option value=4>Legendary</option>
			</select>
		</div>
	  	<div class = "craft-section" id = "section-2-goal" style="display: none;">
			<p>I am trying to...</p>
			<select id="crafting goal" onchange="divFill3()">
				<option value=0>...</option>
				<option value=1>invent a formula</option>
				<option value=2>reverse engineer a formula</option>
				<option value=3>craft a rune</option>
				<option value=4>transfer a rune</option>
				<option value=5>craft a magic item</option>
				<option value=6>craft alchemical items</option>
				<option value=7>craft snares</option>
				<option value=8>craft any other mundane item</option>
			</select>
	  	</div>
	  	<div class = "craft-section" id = "section-2-untrained" style="display: none;">
	  		<p>Sorry, you're untrained in crafting, so you can perform no crafting activities.</p>
	  	</div>
	  	<div class = "craft-section" id = "section-3-formula-invention" style="display: none;">
	  		<p>Inventing a formula of any non-common item will require GM permission and will be more difficult based on the rarity. You need the Alchemical Crafting feat to invent alchemical formulas and the Magical Crafting feat to invent magical formulas.</p>
	  	</div>
	  	<div class = "craft-section" id = "section-3-formula-reverse-engineer" style="display: none;">
	  		<p>Reverse engineering the formula of non-common items will be more difficult based on the rarity. You need the Alchemical Crafting feat to reverse engineer alchemical formulas and the Magical Crafting feat to reverse engineer magical formulas.</p>
	  	</div>
	  	<div class = "craft-section" id = "section-3-craft-rune" style="display: none;">
	  		<p>Etching a rune requires the Magical Crafting feat and the appropriate formula. If you intend to etch it onto a runestone, a runestone will cost 3 gp.</p>
	  	</div>
	  	<div class = "craft-section" id = "section-3-transfer-rune" style="display: none;">
	  		<p>Transfering a rune requires the Magical Crafting feat. If you intend to transfer it to a runestone, a runestone will cost 3 gp.</p>
	  	</div>
	  	<div class = "craft-section" id = "section-3-craft-magic" style="display: none;">
	  		<p>Crafting a magic item requires the Magical Crafting feat and the appropriate formula.</p>
	  	</div>
	  	<div class = "craft-section" id = "section-3-craft-alchemical" style="display: none;">
	  		<p>Crafting an alchemical item requires the Alchemical Crafting feat and the appropriate formula.</p>
	  	</div>
	  	<div class = "craft-section" id = "section-3-craft-snare" style="display: none;">
	  		<p>Crafting a snare requires the Snare Crafting feat and the appropriate formula.</p>
	  	</div>
	  	<div class = "craft-section" id = "section-3-craft-mundane" style="display: none;">
	  		<p>Crafting a mundane item requires the appropriate formula.</p>
	  	</div>
	  	<div class = "craft-section" id = "section-3-item" style="display: none;">
		  	<p>Item Level</p>
		  	<input type="text" id="item level" name="item level" onchange="divFill4()">
		  	<p>Item Price (Gold)</p>
		  	<input type="text" id="item price" name="item price" onchange="divFill4()">
		  	<p>Item Rarity</p>
			<select id="item rarity" onchange="divFill4()">
				<option value=0>...</option>
				<option value=1>Common</option>
				<option value=2>Uncommon</option>
				<option value=3>Rare</option>
				<option value=4>Unique</option>
			</select>
	  	</div>
	  	<div class = "craft-section" id = "section-4-calculation" style="display: none;">
		  	<p>Calculations go here!!!</p>
	  	</div>
	</main>
	<footer class="bookend" id="footer">
		<ul id="footerul">
			<li id="copyright">&copy; 2018-YEAR ELB</li>
			<li><a href="https://github.com/elb-dev/javascript-dnd-npc-gen">Github</a></li>
			<li><a href="https://github.com/elb-dev/javascript-dnd-npc-gen/blob/master/LICENSE">License</a></li>
		</ul>
	</footer>

	<script type="text/javascript" src = "js/functions.js"></script>
	<script type="text/javascript">
		var date = new Date();
		const YEAR = date.getFullYear();

		function clean(){
			document.getElementById("div2").innerHTML = "";
		}

        function setVisibility(elementIdString, visibility) {
            var element = document.getElementById(elementIdString);
            if (visibility == false){
            	element.style.display = 'none';
            } else {
            	element.style.display = 'block';
            }
        }

		function divFill2(){
			let outcome = 2;
			let playerLevel = document.getElementById("player level").value;
			let craftingBonus = document.getElementById("crafting bonus").value;
			let craftingProficiency = document.getElementById("crafting proficiency").value;

			if(craftingProficiency == 0){
				outcome = 1;
			} else if(craftingProficiency == -1){
				outcome = 0;
			}

			if(isNumeric(playerLevel) && isNumeric(craftingBonus)){
				playerLevel = Math.round(playerLevel);
				craftingBonus = Math.round(craftingBonus);
			} else {
				outcome = 0;
			}

			if (outcome == 0){
				setVisibility("section-2-goal",false);
				setVisibility("section-2-untrained",false);
			} else if (outcome == 1){
				setVisibility("section-2-goal",false);
				setVisibility("section-2-untrained",true);
			} else {
				setVisibility("section-2-goal",true);
				setVisibility("section-2-untrained",false);
			}
		}

		function divFill3(){
			let craftingGoal = document.getElementById("crafting goal").value;

			if (craftingGoal == 0){	//None
				setVisibility("section-3-formula-invention",false);
				setVisibility("section-3-formula-reverse-engineer",false);
				setVisibility("section-3-craft-rune",false);
				setVisibility("section-3-transfer-rune",false);
				setVisibility("section-3-craft-magic",false);
				setVisibility("section-3-craft-alchemical",false);
				setVisibility("section-3-craft-snare",false);
				setVisibility("section-3-craft-mundane",false);
				setVisibility("section-3-item",false);
			} else if (craftingGoal == 1){	//Invent a Formula
				setVisibility("section-3-formula-invention",true);
				setVisibility("section-3-formula-reverse-engineer",false);
				setVisibility("section-3-craft-rune",false);
				setVisibility("section-3-transfer-rune",false);
				setVisibility("section-3-craft-magic",false);
				setVisibility("section-3-craft-alchemical",false);
				setVisibility("section-3-craft-snare",false);
				setVisibility("section-3-craft-mundane",false);
				setVisibility("section-3-item",true);
			} else if (craftingGoal == 2){	//Reverse Engineer a Formula
				setVisibility("section-3-formula-invention",false);
				setVisibility("section-3-formula-reverse-engineer",true);
				setVisibility("section-3-craft-rune",false);
				setVisibility("section-3-transfer-rune",false);
				setVisibility("section-3-craft-magic",false);
				setVisibility("section-3-craft-alchemical",false);
				setVisibility("section-3-craft-snare",false);
				setVisibility("section-3-craft-mundane",false);
				setVisibility("section-3-item",true);
			} else if (craftingGoal == 3){	//Etch a Rune
				setVisibility("section-3-formula-invention",false);
				setVisibility("section-3-formula-reverse-engineer",false);
				setVisibility("section-3-craft-rune",true);
				setVisibility("section-3-transfer-rune",false);
				setVisibility("section-3-craft-magic",false);
				setVisibility("section-3-craft-alchemical",false);
				setVisibility("section-3-craft-snare",false);
				setVisibility("section-3-craft-mundane",false);
				setVisibility("section-3-item",true);
			} else if (craftingGoal == 4){	//Transfer a Rune
				setVisibility("section-3-formula-invention",false);
				setVisibility("section-3-formula-reverse-engineer",false);
				setVisibility("section-3-craft-rune",false);
				setVisibility("section-3-transfer-rune",true);
				setVisibility("section-3-craft-magic",false);
				setVisibility("section-3-craft-alchemical",false);
				setVisibility("section-3-craft-snare",false);
				setVisibility("section-3-craft-mundane",false);
				setVisibility("section-3-item",true);
			} else if (craftingGoal == 5){	//Craft a magic item
				setVisibility("section-3-formula-invention",false);
				setVisibility("section-3-formula-reverse-engineer",false);
				setVisibility("section-3-craft-rune",false);
				setVisibility("section-3-transfer-rune",false);
				setVisibility("section-3-craft-magic",true);
				setVisibility("section-3-craft-alchemical",false);
				setVisibility("section-3-craft-snare",false);
				setVisibility("section-3-craft-mundane",false);
				setVisibility("section-3-item",true);
			} else if (craftingGoal == 6){	//Craft an alchemical item
				setVisibility("section-3-formula-invention",false);
				setVisibility("section-3-formula-reverse-engineer",false);
				setVisibility("section-3-craft-rune",false);
				setVisibility("section-3-transfer-rune",false);
				setVisibility("section-3-craft-magic",false);
				setVisibility("section-3-craft-alchemical",true);
				setVisibility("section-3-craft-snare",false);
				setVisibility("section-3-craft-mundane",false);
				setVisibility("section-3-item",true);
			} else if (craftingGoal == 7){	//Craft a snare
				setVisibility("section-3-formula-invention",false);
				setVisibility("section-3-formula-reverse-engineer",false);
				setVisibility("section-3-craft-rune",false);
				setVisibility("section-3-transfer-rune",false);
				setVisibility("section-3-craft-magic",false);
				setVisibility("section-3-craft-alchemical",false);
				setVisibility("section-3-craft-snare",true);
				setVisibility("section-3-craft-mundane",false);
				setVisibility("section-3-item",true);
			} else if (craftingGoal == 8){	//Craft a mundane item
				setVisibility("section-3-formula-invention",false);
				setVisibility("section-3-formula-reverse-engineer",false);
				setVisibility("section-3-craft-rune",false);
				setVisibility("section-3-transfer-rune",false);
				setVisibility("section-3-craft-magic",false);
				setVisibility("section-3-craft-alchemical",false);
				setVisibility("section-3-craft-snare",false);
				setVisibility("section-3-craft-mundane",true);
				setVisibility("section-3-item",true);
			}
		}

		function divFill4(){
			let outcome = 1;

			let itemLevel = document.getElementById("item level").value;
			let itemPrice = document.getElementById("item price").value;
			let itemRarity = document.getElementById("item rarity").value;

			if (isNumeric(itemLevel)){
				itemLevel = Math.round(itemLevel);
			} else {
				outcome = 0;
			}
			if (!isNumeric(itemPrice)){
				outcome = 0;
			}
			if (itemRarity == 0){
				outcome = 0;
			}

			if (outcome == 0){
				setVisibility("section-4-calculation",false);
			} else {
				setVisibility("section-4-calculation",true);
			}

			console.log(outcome);
		}

		//Things in the footer
		document.querySelector("#copyright").value = '&copy; 2018-' + YEAR + ' ELB';

	</script>
</body>
</html>