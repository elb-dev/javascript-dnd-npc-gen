<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="style/style.css">
	<title>ELB's Pathfinder Tools</title>
</head>
<body>
	<header class="bookend" id="header">
		<h1><a href="/javascript-dnd-npc-gen">ELB's Pathfinder Tools</a></h1>
		<nav>
			<ul>
				<li class="nav-item"><a href="/javascript-dnd-npc-gen/npc-gen-upgraded">NPC Gen</a></li>
				<li class="nav-item"><a href="/javascript-dnd-npc-gen/npc-gen-ex-granlund">NPC Gen: Ex-Granlund</a></li>
				<li class="nav-item"><a href="/javascript-dnd-npc-gen/weather-gen">Weather Generator</a></li>
				<li class="nav-item"><a href="/javascript-dnd-npc-gen/settlement-gen">Settlement Generator</a></li>
				<li class="nav-item"><a href="/javascript-dnd-npc-gen/encounter-gen">Encounter Generator</a></li>
				<li class="nav-item"><a href="/javascript-dnd-npc-gen/dice-roller">Dice Roller</a></li>
			</ul>
		</nav>
	</header>
	<main class = "main-npc">
		<p>This character generator is specifically for my custom setting, Ex-Granlund. It will be updated over time as well to better fit the needs of my own games.</p>
		<p><a href="https://www.behindthename.com/random/random.php?number=1&sets=5&gender=both&surname=&randomsurname=yes&showextra=yes&usage_alb=1&usage_bas=1&usage_bre=1&usage_bul=1&usage_cat=1&usage_cro=1&usage_cze=1&usage_dan=1&usage_dut=1&usage_eng=1&usage_est=1&usage_fin=1&usage_fre=1&usage_fri=1&usage_gal=1&usage_geo=1&usage_ger=1&usage_gre=1&usage_hun=1&usage_iri=1&usage_ita=1&usage_lat=1&usage_lim=1&usage_lth=1&usage_mac=1&usage_nor=1&usage_pol=1&usage_por=1&usage_slk=1&usage_spa=1&usage_swe=1&usage_ukr=1&usage_wel=1" target="_blank">Name Generator</a></p>
		<p><a href="https://www.16personalities.com/personality-types" target="_blank">Personality Types</a></p>
		<br>
		<p>Name</p>
  		<input type="text" id="name" name="name">
		<p>Age</p>
  		<input type="text" id="age" name="age">
  		<p>Gender</p>
		<select id="gender">
			<option value=-1>Random</option>
			<option value=0>Man</option>
			<option value=1>Woman</option>
			<option value=2>Non-Binary</option>
			<option value=3>Other</option>
		</select>
		<p>Wealth</p>
		<select id="affluence">
			<option value=-1>Random</option>
			<option value=0>Poor</option>
			<option value=1>Comfortable</option>
			<option value=2>Fine</option>
			<option value=3>Extravagant</option>
		</select>
		<p>Alignment</p>
		<select id="lawful chaotic alignment">
			<option value=-1>Random</option>
			<option value=0>Lawful</option>
			<option value=1>Neutral</option>
			<option value=2>Chaotic</option>
		</select>
		<select id="good evil alignment">
			<option value=-1>Random</option>
			<option value=0>Good</option>
			<option value=1>Neutral</option>
			<option value=2>Evil</option>
		</select>
		<p>Ability Score Modifiers</p>
		<select id="ability score tilt">
			<option value=0>Normal</option>
			<option value=1>Above Average</option>
			<option value=2>Below Average</option>
		</select>
		<input type="text" id="ability score str" name="ability score str" placeholder="STR, -4 to 4">
		<input type="text" id="ability score dex" name="ability score dex" placeholder="DEX, -4 to 4">
		<input type="text" id="ability score con" name="ability score con" placeholder="CON, -4 to 4">
		<input type="text" id="ability score int" name="ability score int" placeholder="INT, -4 to 4">
		<input type="text" id="ability score wis" name="ability score wis" placeholder="WIS, -4 to 4">
		<input type="text" id="ability score cha" name="ability score cha" placeholder="CHA, -4 to 4">
		<p>Height</p>
		<select id="sex">
			<option value=-1>Calculate Height As Gender</option>
			<option value=0>Calculate Height As Male</option>
			<option value=1>Calculate Height As Female</option>
			<option value=2>Calculate Height As Between</option>
		</select>
		<p>Fat</p>
		<select id="fat">
			<option value=-1>Random</option>
			<option value=0>Extremely Low Fat</option>
			<option value=1>Low Fat</option>
			<option value=2>Average Fat</option>
			<option value=3>High Fat</option>
			<option value=4>Extremely High Fat</option>
		</select>
		<p>Personality</p>
		<select id="personality i or e">
			<option value=-1>Random Introvert/Extrovert</option>
			<option value=0>Introvert</option>
			<option value=1>Extrovert</option>
		</select>
		<select id="personality s or n">
			<option value=-1>Random Observant/Intuitive</option>
			<option value=0>Observant</option>
			<option value=1>Intuitive</option>
		</select>
		<select id="personality t or f">
			<option value=-1>Random Thinking/Feeling</option>
			<option value=0>Thinking</option>
			<option value=1>Feeling</option>
		</select>
		<select id="personality j or p">
			<option value=-1>Random Judging/Prospecting</option>
			<option value=0>Judging</option>
			<option value=1>Prospecting</option>
		</select>
		<select id="personality a or t">
			<option value=-1>Random Assertive/Turbulent</option>
			<option value=0>Assertive</option>
			<option value=1>Turbulent</option>
		</select>
		<br>
		<input type="button" onclick="generateNpc()" value="GENERATE NPC">
		<br>
		<textarea id="box" rows="21" cols="50"></textarea>
	</main>
	<footer class="bookend" id="footer">
		<ul id="footerul">
			<li id="copyright">&copy; 2018-YEAR ELB</li>
			<li><a href="https://github.com/elb-dev/javascript-dnd-npc-gen">Github</a></li>
			<li><a href="https://github.com/elb-dev/javascript-dnd-npc-gen/blob/master/LICENSE">License</a></li>
		</ul>
	</footer>

	<script type="text/javascript" src = "js/functions.js"></script>
	<script type="text/javascript">
		var date = new Date();
		const YEAR = date.getFullYear();

		function generateNpc(){
			document.getElementById("box").value = "";

			//Name
			let name = document.getElementById("name").value;
			if (name == ""){
				var fName = String.fromCharCode(iRandomRange(65,90));
				var lName = String.fromCharCode(iRandomRange(65,90));
				name = fName + " " + lName;
			}
			document.getElementById("box").value += "Name: " + name;

			//Age
			var age;
			do{
				age = iRandomRangeBell(-36,90,4);
			} while(age < 15)
			if (isNumeric(document.getElementById("age").value)){
				age = document.getElementById("age").value;
			}
			document.getElementById("box").value += '\nAge: ' + age;

			//Race
			document.getElementById("box").value += '\nRace:';

			//Gender
			var genderChoice = ["Man", "Woman", "Non-Binary", "Other"];
			var gender = document.getElementById("gender").value;
			if (gender == -1){
				gender = iRandomRange(0,1);
			}
			document.getElementById("box").value += "\nGender: " + genderChoice[gender];

			//Affluence
			let affluence = document.getElementById("affluence").value
			console.log(affluence);
			if (affluence == -1){
				affluence = diceRollDrop(2,4,true,1)-1;
			}
			let affluenceTypes = ["Poor", "Comfortable", "Fine", "Extravagant"];
			document.getElementById("box").value += "\nWealth: " + affluenceTypes[affluence];

			//Alignment
			var alignGNE = ["Good","Neutral","Evil"];
			var alignLNC = ["Lawful","Neutral","Chaotic"];
			var alignGNEChoice = iRandomRange(0,2);
			var alignLNCChoice = iRandomRange(0,2);
			if (document.getElementById("good evil alignment").value != -1){
				alignGNEChoice = document.getElementById("good evil alignment").value;
			}
			if (document.getElementById("lawful chaotic alignment").value != -1){
				alignLNCChoice = document.getElementById("lawful chaotic alignment").value;
			}
			var alignment;
			if(alignLNCChoice == 1 && alignGNEChoice == 1){
				alignment = "True Neutral";
			} else {
				alignment = alignLNC[alignLNCChoice] + " " + alignGNE[alignGNEChoice];
			}
			document.getElementById("box").value += '\nAlignment: ' + alignment;

			//Stats
			if (document.getElementById("ability score tilt").value == 0){
				var statStrength = diceRoll(3,6);
				var statDexterity = diceRoll(3,6);
				var statConstitution = diceRoll(3,6);
				var statIntelligence = diceRoll(3,6);
				var statWisdom = diceRoll(3,6);
				var statCharisma = diceRoll(3,6);
			} else if (document.getElementById("ability score tilt").value == 1){
				var statStrength = diceRollDrop(4,6,false,1);
				var statDexterity = diceRollDrop(4,6,false,1);
				var statConstitution = diceRollDrop(4,6,false,1);
				var statIntelligence = diceRollDrop(4,6,false,1);
				var statWisdom = diceRollDrop(4,6,false,1);
				var statCharisma = diceRollDrop(4,6,false,1);
			} else if (document.getElementById("ability score tilt").value == 2){
				var statStrength = diceRollDrop(4,6,true,1);
				var statDexterity = diceRollDrop(4,6,true,1);
				var statConstitution = diceRollDrop(4,6,true,1);
				var statIntelligence = diceRollDrop(4,6,true,1);
				var statWisdom = diceRollDrop(4,6,true,1);
				var statCharisma = diceRollDrop(4,6,true,1);
			}

			statStrength = statModCalc(statStrength);
			statDexterity = statModCalc(statDexterity);
			statConstitution = statModCalc(statConstitution);
			statIntelligence = statModCalc(statIntelligence);
			statWisdom = statModCalc(statWisdom);
			statCharisma = statModCalc(statCharisma);

			if (isNumeric(document.getElementById("ability score str").value)){
				statStrength = document.getElementById("ability score str").value;
				statStrength = Math.round(statStrength);
				statStrength = clamp(-4,4,statStrength);
			}
			if (isNumeric(document.getElementById("ability score dex").value)){
				statDexterity = document.getElementById("ability score dex").value;
				statDexterity = Math.round(statDexterity);
				statDexterity = clamp(-4,4,statDexterity);
			}
			if (isNumeric(document.getElementById("ability score con").value)){
				statConstitution = document.getElementById("ability score con").value;
				statConstitution = Math.round(statConstitution);
				statConstitution = clamp(-4,4,statConstitution);
			}
			if (isNumeric(document.getElementById("ability score int").value)){
				statIntelligence = document.getElementById("ability score int").value;
				statIntelligence = Math.round(statIntelligence);
				statIntelligence = clamp(-4,4,statIntelligence);
			}
			if (isNumeric(document.getElementById("ability score wis").value)){
				statWisdom = document.getElementById("ability score wis").value;
				statWisdom = Math.round(statWisdom);
				statWisdom = clamp(-4,4,statWisdom);
			}
			if (isNumeric(document.getElementById("ability score cha").value)){
				statCharisma = document.getElementById("ability score cha").value;
				statConstitution = Math.round(statConstitution);
				statConstitution = clamp(-4,4,statConstitution);
			}
			document.getElementById("box").value += "\nSTR: " + statStrength + " DEX: " + statDexterity + " CON: " + statConstitution + " INT: " + statIntelligence + " WIS: " + statWisdom + " CHA: " + statCharisma;

			//Class/Occupation
			document.getElementById("box").value += "\nClass/Occupation: Doorknob Licker";

			//True height range is 105 to 241

			//Height
			let sex = document.getElementById("sex").value;
			if (sex == -1){
				sex = gender;
			}
			if (sex == 3){
				sex = 2;
			}
			let heightMedians = [178.4,164.7,171.55];
			let heightDeviations = [7.59,7.07,7.33]
			let heightPosition = randomRange(0,100)*0.01;
			let heightCentimeters = bellCurveLerp(heightPosition,heightMedians[sex],heightDeviations[sex]);
			let heightInches = centimetersToInches(heightCentimeters);
			let heightFeetAndInches = heightFormat(heightInches);
			document.getElementById("box").value += "\nHeight: " + heightFeetAndInches + " - " + Math.round(heightCentimeters) + " cm";

			//Build
			var buildMale = 
			[["Malnourished","Boney","Boney","Gangly","Gangly","Athletic","Muscular","Buff","Body Builder"],
			["Twig","Twig","Twig","Lithe","Lithe","Athletic","Muscular","Buff","Strong Man"],
			["Chubby","Chubby","Chubby","Average","Average","Average","Athletic","Hardy","Strong Man"],
			["Fat","Fat","Fat","Husky","Husky","Husky","Hardy","Hardy","Hardy"],
			["Obese","Obese","Obese","Obese","Obese","Obese","Obese","Obese","Bear Wrestler"]];
			var buildFemale = 
			[["Malnourished","Boney","Boney","Gangly","Gangly","Athletic","Athletic","Built","Body Builder"],
			["Twig","Twig","Twig","Lithe","Lithe","Athletic","Athletic","Built","Strong Woman"],
			["Chubby","Chubby","Chubby","Curvy","Curvy","Curvy","Athletic","Built","Strong Woman"],
			["Fat","Fat","Fat","Heavy Set","Thicc","Thicc","Thicc","Strong Woman","Strong Woman"],
			["Obese","Obese","Obese","Obese","Obese","Obese","Obese","Obese","Bear Wrestler"]];
			var buildNeutral = 
			[["Malnourished","Boney","Boney","Gangly","Gangly","Athletic","Athletic","Built","Body Builder"],
			["Twig","Twig","Twig","Lithe","Lithe","Athletic","Athletic","Built","Strong Person"],
			["Chubby","Chubby","Chubby","Thicc","Thicc","Thicc","Athletic","Built","Strong Person"],
			["Fat","Fat","Fat","Heavy Set","Thicc","Thicc","Thicc","Built","Strong Person"],
			["Obese","Obese","Obese","Obese","Obese","Obese","Obese","Obese","Bear Wrestler"]];
			var builds = [buildMale,buildFemale,buildNeutral];

			let buildFat = document.getElementById("fat").value;
			if (buildFat == -1){
				buildFat = diceRollDrop(2,5,true,1)-1;
			}
			let buildStr = statStrength+4;
			document.getElementById("box").value += "\nBuild: " + builds[sex][buildFat][buildStr];

			//Personality
			let personalityIE = document.getElementById("personality i or e").value;
			let personalitySN = document.getElementById("personality s or n").value;
			let personalityTF = document.getElementById("personality t or f").value;
			let personalityJP = document.getElementById("personality j or p").value;
			let personalityAT = document.getElementById("personality a or t").value;

			let personalityArray = [personalityJP, personalityTF, personalitySN, personalityIE];
			let personalityValue = 0;

			for (let p = 0; p < personalityArray.length; p++){
				if (personalityArray[p] == -1){
					personalityArray[p] = iRandomRange(0,1);
				}
				personalityValue += (personalityArray[p] * (2 ** p))
			}
			if (personalityAT == -1){
				personalityAT = iRandomRange(0,1);
			}

			//somethingtypetyp = ["00000", "00001", "00010", "00011", "00100", "00101", "00110", "00111", "01000", "01001", "01010", "01011", "01100", "01101", "01110", "01111", "10000", "10001", "10010", "10011", "10100", "10101", "10110", "10111", "11000", "11001", "11010", "11011", "11100", "11101", "11110", "11111"]
			let personalityTypes = ["ISTJ", "ISTP", "ISFJ", "ISFP", "INTJ", "INTP", "INFJ", "INFP", "ESTJ", "ESTP", "ESFJ", "ESFP", "ENTJ", "ENTP", "ENFJ", "ENFP"];
			let personalityNames = ["Logistician", "Virtuoso", "Defender", "Adventurer", "Architect", "Logician", "Advocate", "Mediator", "Executive", "Entrepreneur", "Consul", "Entertainer", "Commander", "Debater", "Protagonist", "Campaigner"];
			let personalityDescriptions = [
				"A practical and fact-minded individual, whose reliability cannot be doubted.",
				"A bold and practical experimenter, master of many kinds of tools.",
				"A very dedicated and warm protector, always ready to defend their loved ones.",
				"A flexible and charming artist, always ready to explore and experience something new.",
				"An imaginative and strategic thinker with a plan for everything.",
				"An innovative inventor with an unquenchable thirst for knowledge.",
				"Quiet and mystical, yet a very inspiring and tireless idealist.",
				"A poetic, kind, and altruistic person, always eager to help a good cause.",
				"An excellent administrator, unspurpassed at managing things - or people.",
				"A smart, energetic, and very perceptive person who truly enjoys living on the edge.",
				"An extraordinarily caring, social, and popular person, always eager to help.",
				"A spontaneous, energetic, and enthusiastic person - life is never boring around them.",
				"A bold, imaginative, and strong-willed leader, always finding a way - or making one.",
				"A smart and curious thinker who cannot resist an intellectual challenge.",
				"A charismatic and inspiring leader, able to mesmerize their listeners.",
				"An enthusiastic, creative, and sociable free spirt who can always find a reason to smile."
				];
			let personalityAdditionalAT = ["A","T"];
			document.getElementById("box").value += "\nPersonality: " + personalityNames[personalityValue] + " - " + personalityTypes[personalityValue] + "-" + personalityAdditionalAT[personalityAT];
			document.getElementById("box").value += "\n" + personalityDescriptions[personalityValue];

			//Appearance - Form
			var appearanceForm = 
			["Pronounced scar",
			"Missing teeth",
			"Missing fingers",
			"Unusual eye color",
			"Nervous eye twitch",
			"Birthmark",
			"Unusual skin color",
			"Braided beard or hair",
			"Unusual hair color",
			"Distinctive nose",
			"Distinctive posture",
			"Beautiful hair",
			"Asymmetrical Face",
			"Piercing Eyes",
			"Normal","Normal","Normal","Normal","Normal","Normal","Normal","Normal","Normal","Normal","Normal","Normal","Normal","Normal","Normal","Normal","Normal"];
			document.getElementById("box").value += "\nAppearance Form: " + appearanceForm[iRandomRange(0,appearanceForm.length-1)];

			//Mannerism
			var quirk = 
			["Prone to singing, whistling, or humming quietly",
			"Speaks in rhyme or some other peculiar way",
			"Particularly low or high voice",
			"Slurs words, lisps, or stutters",
			"Enunciates overly clearly",
			"Speaks loudly",
			"Whispers",
			"Uses flowery speech or long words",
			"Frequently uses the wrong word",
			"Uses colorful oaths and exclamations",
			"Makes constant jokes or puns",
			"Prone to predictions of doom",
			"Fidgets",
			"Squints",
			"Stares into the distance",
			"Chews something",
			"Paces",
			"Taps fingers",
			"Bites fingernails",
			"Twirls hair or tugs beard"];
			document.getElementById("box").value += "\nQuirk: " + quirk[iRandomRange(0,quirk.length-1)];

			//Flaw or Secret
			var flaw = 
			["Forbidden love or susceptibility to romance",
			"Enjoys decadent pleasures",
			"Arrogance",
			"Envies another creature's possessions or station",
			"Overpowering greed",
			"Prone to rage",
			"Has a powerful enemy",
			"Specific phobia",
			"Shameful or scandalous history",
			"Secret crime or misdeed",
			"Possession of forbidden lore",
			"Foolhardy bravery"];
			document.getElementById("box").value += "\nFlaw or Secret: " + flaw[iRandomRange(0,flaw.length-1)];

			//Language
			document.getElementById("box").value += "\nLanguages: "

			//Description
			document.getElementById("box").value += "\nDescription:";
		}

		//Things in the footer
		document.querySelector("#copyright").value = '&copy; 2018-' + YEAR + ' ELB';

	</script>
</body>
</html>